steps:

  # Install node packages
  - name: 'gcr.io/cloud-builders/npm:latest'
    args: [ 'install' ]
    dir: 'frontend'
    id: install
    waitFor: [ '-' ]

  # Lint
  - name: 'gcr.io/cloud-builders/npm:current'
    args: [ 'run', 'lint' ]
    dir: 'frontend'
    id: lint
    waitFor:
      - install

  # Build
  - name: 'gcr.io/cloud-builders/npm:current'
    args: [ 'run', 'build' ]
    dir: 'frontend'
    id: build
    waitFor: 
      - install

  # Test
  - name: 'gcr.io/cloud-builders/npm:current'
    args: [ 'run', 'test']
    dir: 'frontend'
    id: test
    waitFor:
      - build
